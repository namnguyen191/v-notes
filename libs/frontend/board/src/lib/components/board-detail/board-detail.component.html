<cds-modal
  [open]="deleteColumnModalState().isOpen"
  (overlaySelected)="!deleteColumnModalState()"
>
  <cds-modal-header [showCloseButton]="true" (closeSelect)="closeModal()">
    <h2 cdsModalHeaderHeading>Confirmation</h2>
  </cds-modal-header>
  <section cdsModalContent>
    <h3>Are you sure you want to delete this column?</h3>
    <p cdsModalContentText>
      This will also delete all tasks associate with it and the action is
      irreversible
    </p>
  </section>
  <cds-modal-footer>
    <ng-container>
      <button
        cdsButton="secondary"
        [attr.modal-primary-focus]="true"
        (click)="closeModal()"
      >
        Cancel
      </button>
      <button cdsButton="danger--primary" (click)="onConfirmDeleteColumn()">
        Confirm
      </button>
    </ng-container>
  </cds-modal-footer>
</cds-modal>

<ng-container *ngIf="data$ | async as data">
  <div class="title-container">
    <h2>{{ data.currentBoard.title }}</h2>
  </div>
  <div class="columns-container">
    <span *ngFor="let column of data.columns" class="column">
      <div class="column__title">
        <v-notes-lib-inline-form
          [formTitle]="column.title"
          (valueSubmitted)="onUpdatedColumnNameSubmitted($event, column.id)"
        ></v-notes-lib-inline-form>
      </div>
      <div class="column__tasks-container">
        <ng-container *ngFor="let task of data.tasks | filterTasks : column.id">
          <h4>{{ task.title }}</h4>
        </ng-container>
        <v-notes-lib-inline-form
          invalidText=""
          formTitle="Enter task name"
          (valueSubmitted)="onTaskNameSubmitted($event, column.id)"
        ></v-notes-lib-inline-form>
      </div>
      <button
        style="align-self: flex-end"
        cdsButton="danger--primary"
        (click)="onDeleteColumnClick(column.id)"
      >
        Delete column
      </button>
    </span>
    <v-notes-lib-inline-form
      formTitle="Enter column name"
      (valueSubmitted)="onColumnNameSubmitted($event)"
    ></v-notes-lib-inline-form>
  </div>
</ng-container>
