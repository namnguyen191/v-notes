"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[258],{9258:($e,C,r)=>{r.r(C),r.d(C,{TaskComponent:()=>Fe});var a=r(6814),e=r(6689),k=r(6040),S=r(1079),D=r(2806),u=r(7911),b=r(4921),E=r(6223),L=r(7394),f=r(2096),Q=r(2438),Z=r(2664),R=r(5592),m=r(7464),x=r(4768),y=r(1188),M=r(6879),g=r(618),H=r(4352),V=r(9360),F=r(8251);function T(n,l=H.z){return(0,V.e)((t,i)=>{let s=null,o=null,c=null;const d=()=>{if(s){s.unsubscribe(),s=null;const h=o;o=null,i.next(h)}};function p(){const h=c+n,w=l.now();if(w<h)return s=this.schedule(void 0,h-w),void i.add(s);d()}t.subscribe((0,F.x)(i,h=>{o=h,c=l.now(),s||(s=l.schedule(p,n),i.add(s))},()=>{d(),i.complete()},void 0,()=>{o=s=null}))})}var I=r(7398),_=r(2181),K=r(1374);const P=["dropdownButton"],Y=["dropdownMenu"];function $(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.label)}}function z(n,l){}function G(n,l){if(1&n&&e.YNc(0,z,0,0,"ng-template",16),2&n){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.label)}}const j=function(n){return{"cds--label--disabled":n}};function W(n,l){if(1&n&&(e.TgZ(0,"label",15),e.YNc(1,$,2,1,"ng-container",6),e.YNc(2,G,1,1,null,6),e.qZA()),2&n){const t=e.oxw();e.Q6J("for",t.id)("ngClass",e.VKq(4,j,t.disabled)),e.xp6(1),e.Q6J("ngIf",!t.isTemplate(t.label)),e.xp6(1),e.Q6J("ngIf",t.isTemplate(t.label))}}function q(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearSelected())})("keydown.enter",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearSelected())}),e._uU(1),e.O4$(),e.TgZ(2,"svg",18),e._UZ(3,"path",19),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("title",t.clearText),e.xp6(1),e.hij(" ",t.getSelectedCount()," ")}}function X(n,l){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.getDisplayStringValue()))}}function ee(n,l){}function te(n,l){if(1&n&&e.YNc(0,ee,0,0,"ng-template",21),2&n){const t=e.oxw();e.Q6J("ngTemplateOutletContext",t.getRenderTemplateContext())("ngTemplateOutlet",t.displayValue)}}function ie(n,l){1&n&&(e.O4$(),e._UZ(0,"svg",22))}function ne(n,l){1&n&&(e.O4$(),e._UZ(0,"svg",23))}const se=function(n){return{"cds--list-box__menu-icon--open":n}};function oe(n,l){if(1&n&&(e.O4$(),e._UZ(0,"svg",24)),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,se,!t.menuIsClosed)),e.uIk("aria-label",t.menuButtonLabel)}}function le(n,l){1&n&&e.Hsn(0,0,["*ngIf","!menuIsClosed"])}function re(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.helperText)}}function ce(n,l){}function ae(n,l){if(1&n&&e.YNc(0,ce,0,0,"ng-template",16),2&n){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.helperText)}}const de=function(n){return{"cds--form__helper-text--disabled":n}};function he(n,l){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,re,2,1,"ng-container",6),e.YNc(2,ae,1,1,null,6),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,de,t.disabled)),e.xp6(1),e.Q6J("ngIf",!t.isTemplate(t.helperText)),e.xp6(1),e.Q6J("ngIf",t.isTemplate(t.helperText))}}function ue(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.invalidText)}}function pe(n,l){}function me(n,l){if(1&n&&e.YNc(0,pe,0,0,"ng-template",16),2&n){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.invalidText)}}function fe(n,l){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,ue,2,1,"ng-container",6),e.YNc(2,me,1,1,null,6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isTemplate(t.invalidText)),e.xp6(1),e.Q6J("ngIf",t.isTemplate(t.invalidText))}}function ge(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.warnText)}}function _e(n,l){}function we(n,l){if(1&n&&e.YNc(0,_e,0,0,"ng-template",16),2&n){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.warnText)}}function ve(n,l){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,ge,2,1,"ng-container",6),e.YNc(2,we,1,1,null,6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isTemplate(t.warnText)),e.xp6(1),e.Q6J("ngIf",t.isTemplate(t.warnText))}}const be=function(n,l,t,i,s,o,c,d,p,h,w,Ke,Pe,Ye){return{"cds--dropdown":n,"cds--multiselect":l,"cds--multi-select--selected":t,"cds--dropdown--light":i,"cds--list-box--light":s,"cds--list-box--inline":o,"cds--skeleton":c,"cds--dropdown--disabled cds--list-box--disabled":d,"cds--dropdown--invalid":p,"cds--dropdown--warning cds--list-box--warning":h,"cds--dropdown--sm cds--list-box--sm":w,"cds--dropdown--md cds--list-box--md":Ke,"cds--dropdown--lg cds--list-box--lg":Pe,"cds--list-box--expanded":Ye}},xe=function(n){return{a:n}},ye=function(n){return{"cds--list-box--up":n}},Te=["*"],Ie=["list"],Ce=["listItem"];function ke(n,l){if(1&n&&(e.TgZ(0,"div",9)(1,"label",10),e._UZ(2,"input",11)(3,"span",12),e.TgZ(4,"span",13),e._uU(5),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.uIk("data-contained-checkbox-state",t.selected),e.xp6(1),e.Q6J("checked",t.selected)("disabled",t.disabled),e.xp6(3),e.Oqu(t.content)}}function Se(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.content)}}function De(n,l){1&n&&(e.O4$(),e._UZ(0,"svg",14))}function Ee(n,l){}const Le=function(n){return{item:n}};function Me(n,l){if(1&n&&e.YNc(0,Ee,0,0,"ng-template",15),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("ngTemplateOutletContext",e.VKq(2,Le,t))("ngTemplateOutlet",i.listTpl)}}const Be=function(n,l){return{"cds--list-box__menu-item--active":n,"cds--list-box__menu-item--highlighted":l}};function Oe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("click",function(s){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.doClick(s,c))}),e.TgZ(1,"div",4,5),e.YNc(3,ke,6,4,"div",6),e.YNc(4,Se,2,1,"ng-container",7),e.YNc(5,De,1,0,"svg",8),e.YNc(6,Me,1,4,null,7),e.qZA()()}if(2&n){const t=l.$implicit,i=l.index,s=e.oxw();e.Q6J("id",s.getItemId(i))("ngClass",e.WLB(9,Be,t.selected,s.highlightedItem===s.getItemId(i))),e.uIk("aria-selected",t.selected)("title",s.showTitles?t.content:null)("disabled",!!t.disabled||null),e.xp6(3),e.Q6J("ngIf",!s.listTpl&&"multi"===s.type),e.xp6(1),e.Q6J("ngIf",!s.listTpl&&"single"===s.type),e.xp6(1),e.Q6J("ngIf",!s.listTpl&&"single"===s.type),e.xp6(1),e.Q6J("ngIf",s.listTpl)}}let B=(()=>{class n{constructor(){this.type="single",this.size="md"}set items(t){}get items(){}getNextItem(){}hasNextElement(){}getNextElement(){}getPrevItem(){}hasPrevElement(){}getPrevElement(){}getSelected(){}getCurrentItem(){}getCurrentElement(){}getListItems(){}propagateSelected(t){}filterBy(t){}initFocus(){}onItemsReady(t){}reorderSelected(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","cdsAbstractDropdownView",""],["","ibmAbstractDropdownView",""]],inputs:{items:"items"},outputs:{select:"select",blurIntent:"blurIntent"}}),n})();const O={top:0,left:0};let A=(()=>{class n{constructor(t,i){this.placeholderService=t,this.animationFrameService=i,this.animationFrameSubscription=new L.w0,this._offset=O}set offset(t){this._offset=Object.assign({},O,t)}get offset(){return this._offset}appendToBody(t,i,s){i.style.display="block";const o=document.createElement("div");return o.className=`dropdown ${s}`,o.style.width=t.offsetWidth+"px",o.style.position="absolute",o.appendChild(i),this.placeholderService.hasPlaceholderRef()?this.placeholderService.appendElement(o):document.body.appendChild(o),this.menuInstance=o,this.animationFrameSubscription=this.animationFrameService.tick.subscribe(()=>{this.positionDropdown(t,o)}),this.positionDropdown(t,o),o}appendToDropdown(t){if(!this.menuInstance)return;const i=this.menuInstance,s=i.firstElementChild;return this.menuInstance=null,s.style.display="none",t.appendChild(s),this.animationFrameSubscription.unsubscribe(),this.placeholderService.hasPlaceholderRef()&&this.placeholderService.hasElement(i)?this.placeholderService.removeElement(i):document.body.contains(i)&&document.body.removeChild(i),i}updatePosition(t){this.positionDropdown(t,this.menuInstance)}ngOnDestroy(){this.animationFrameSubscription.unsubscribe()}positionDropdown(t,i){if(!i)return;let s=0;const o=i.querySelector(".cds--list-box__menu");o&&(t.getBoundingClientRect().left!==o.getBoundingClientRect().left?t.getBoundingClientRect().left-o.getBoundingClientRect().left+o.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(s=t.offsetWidth-o.offsetWidth):o.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(s=t.offsetWidth-o.offsetWidth));const c=(0,m._K)("position",["relative","fixed","absolute"],i.parentElement),d=c?-1*c.getBoundingClientRect().top:this.offset.top,p=c?-1*c.getBoundingClientRect().left:this.offset.left+s;let h=y.FK.findAbsolute(t,i,"bottom");h=y.FK.addOffset(h,d,p),y.FK.setElement(i,h)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.Q_),e.LFG(m.NV))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,i,s,o){this.elementRef=t,this.i18n=i,this.dropdownService=s,this.elementService=o,this.id="dropdown-"+n.dropdownCount++,this.placeholder="",this.displayValue="",this.clearText=this.i18n.get().DROPDOWN.CLEAR,this.size="md",this.type="single",this.theme="dark",this.disabled=!1,this.skeleton=!1,this.inline=!1,this.disableArrowKeys=!1,this.invalid=!1,this.warn=!1,this.appendInline=null,this.selectionFeedback="top-after-reopen",this.menuButtonLabel=this.i18n.get().DROPDOWN.OPEN,this.selectedLabel=this.i18n.get().DROPDOWN.SELECTED,this.selected=new e.vpe,this.onClose=new e.vpe,this.close=new e.vpe,this.hostClass=!0,this.menuIsClosed=!0,this._dropUp=!1,this.noop=this._noop.bind(this),this.outsideClick=this._outsideClick.bind(this),this.outsideKey=this._outsideKey.bind(this),this.keyboardNav=this._keyboardNav.bind(this),this.visibilitySubscription=new L.w0,this.onTouchedCallback=this._noop,this._writtenValue=[],this.propagateChange=c=>{}}get writtenValue(){return this._writtenValue}set writtenValue(t){t&&0===t.length&&this.clearSelected(),this._writtenValue=t}ngOnInit(){this.view&&(this.view.type=this.type)}ngAfterContentInit(){if(!this.view)return;(this.writtenValue&&this.writtenValue.length||"number"==typeof this.writtenValue)&&this.writeValue(this.writtenValue),this.view.type=this.type,this.view.size=this.size;const t=i=>i&&i.isUpdate;this.view.select.subscribe(i=>{if("single"===this.type&&!t(i)&&!Array.isArray(i)&&(this.closeMenu(),this.propagateChange(i.item&&i.item.selected?this.itemValueKey?i.item[this.itemValueKey]:i.item:null)),"multi"===this.type&&!t(i))if(this.itemValueKey&&this.view.getSelected()){const s=this.view.getSelected().map(o=>o[this.itemValueKey]);this.propagateChange(s)}else this.propagateChange(this.view.getSelected());t(i)||(this.checkForReorder(),this.selected.emit(i))})}ngAfterViewInit(){null===this.appendInline&&(0,m.OQ)(this.elementRef.nativeElement)?this.appendInline=!1:null===this.appendInline&&(this.appendInline=!0),this.checkForReorder()}ngOnDestroy(){this.appendInline||this._appendToDropdown()}writeValue(t){this.writtenValue=t,this.view.onItemsReady(()=>{if(t)if("single"===this.type)if(this.itemValueKey){const i=Object.assign({},this.view.getListItems().find(s=>s[this.itemValueKey]===t));i.selected=!0,this.view.propagateSelected([i])}else this.view.propagateSelected([t]);else if(this.itemValueKey){let i=[];for(const s of t)for(const o of this.view.getListItems())o[this.itemValueKey]===s&&i.push(Object.assign({},o,{selected:!0}));this.view.propagateSelected(i)}else this.view.propagateSelected(t);else this.view.propagateSelected([t]);this.checkForReorder()})}onBlur(){this.onTouchedCallback()}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}onKeyDown(t){if("Escape"===t.key&&!this.menuIsClosed&&t.stopImmediatePropagation(),"Escape"===t.key)t.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus();else if(this.menuIsClosed&&(" "===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)){if(this.disableArrowKeys&&("ArrowDown"===t.key||"ArrowUp"===t.key))return;t.preventDefault(),this.openMenu()}!this.menuIsClosed&&"Tab"===t.key&&this.dropdownMenu.nativeElement.contains(t.target)&&this.closeMenu(),!this.menuIsClosed&&"Tab"===t.key&&t.shiftKey&&this.closeMenu(),"multi"!==this.type&&this.menuIsClosed&&this.closedDropdownNavigation(t)}closedDropdownNavigation(t){if("ArrowDown"===t.key){t.preventDefault(),this.view.getCurrentItem().selected=!1;let i=this.view.getNextItem();i&&(i.selected=!0)}else if("ArrowUp"===t.key){t.preventDefault(),this.view.getCurrentItem().selected=!1;let i=this.view.getPrevItem();i&&(i.selected=!0)}}getDisplayStringValue(){if(!this.view)return;let t=this.view.getSelected();return!t.length||this.displayValue&&this.isRenderString()?t.length&&this.isRenderString()?(0,f.of)(this.displayValue):(0,f.of)(this.placeholder):(0,f.of)("multi"===this.type?this.placeholder:t[0].content)}isRenderString(){return"string"==typeof this.displayValue}getRenderTemplateContext(){if(!this.view)return;let t=this.view.getSelected();return"multi"===this.type?{items:t}:t&&t.length>0?{item:t[0]}:{}}getSelectedCount(){if(this.view.getSelected())return this.view.getSelected().length}clearSelected(){if(!this.disabled&&0!==this.getSelectedCount()){for(const t of this.view.getListItems())t.selected=!1;this.selected.emit([]),this.propagateChange([])}}valueSelected(){return!!this.view.getSelected()}_noop(){}_outsideClick(t){!this.elementRef.nativeElement.contains(t.target)&&!this.dropdownMenu.nativeElement.contains(t.target)&&this.closeMenu()}_outsideKey(t){!this.menuIsClosed&&"Tab"===t.key&&this.dropdownMenu.nativeElement.contains(t.target)&&this.closeMenu()}_keyboardNav(t){"Escape"===t.key&&!this.menuIsClosed&&t.stopImmediatePropagation(),"Escape"===t.key?(t.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus()):!this.menuIsClosed&&"Tab"===t.key&&(this.dropdownButton.nativeElement.focus(),this.dropdownButton.nativeElement.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Tab"})),this.closeMenu())}_appendToDropdown(){this.dropdownService.appendToDropdown(this.elementRef.nativeElement),this.dropdownMenu.nativeElement.removeEventListener("keydown",this.keyboardNav,!0)}_appendToBody(){this.dropdownService.appendToBody(this.dropdownButton.nativeElement,this.dropdownMenu.nativeElement,`${this.elementRef.nativeElement.className}${"light"===this.theme?" cds--list-box--light":""}${this.menuIsClosed?"":" cds--list-box--expanded"}`),this.dropdownMenu.nativeElement.addEventListener("keydown",this.keyboardNav,!0)}_shouldDropUp(){const t=this.dropdownMenu&&this.dropdownMenu.nativeElement.querySelector(".cds--list-box__menu"),i=t&&t.getBoundingClientRect();return!(!t||!i)&&(0,m.O3)(t).reduce((o,c)=>{const d=c.getBoundingClientRect();return o||!(i.bottom<=d.bottom)},!1)}openMenu(){0!==this.view.getListItems().length&&(this._dropUp=!1,this.menuIsClosed=!1,this.appendInline||(this.visibilitySubscription=this.elementService.visibility(this.dropdownButton.nativeElement,this.elementRef.nativeElement).subscribe(s=>{s.visible||this.closeMenu()}),this._appendToBody()),setTimeout(()=>{null==this.dropUp&&(this._dropUp=this._shouldDropUp())},0),document.body.firstElementChild.addEventListener("click",this.noop,!0),document.body.firstElementChild.addEventListener("keydown",this.noop,!0),document.addEventListener("click",this.outsideClick,!0),document.addEventListener("keydown",this.outsideKey,!0),setTimeout(()=>this.view.initFocus(),0))}closeMenu(){this.menuIsClosed||(this.menuIsClosed=!0,this.checkForReorder(),this.onClose.emit(),this.close.emit(),this.dropdownButton.nativeElement.focus(),this.view.disableScroll&&this.view.disableScroll(),this.appendInline||(this.visibilitySubscription.unsubscribe(),this._appendToDropdown()),document.body.firstElementChild.removeEventListener("click",this.noop,!0),document.body.firstElementChild.removeEventListener("keydown",this.noop,!0),document.removeEventListener("click",this.outsideClick,!0),document.removeEventListener("keydown",this.outsideKey,!0))}toggleMenu(){this.menuIsClosed?this.openMenu():this.closeMenu()}isTemplate(t){return t instanceof e.Rgc}checkForReorder(){"multi"===this.type&&(this.menuIsClosed&&"top-after-reopen"===this.selectionFeedback||"top"===this.selectionFeedback)&&this.view.reorderSelected()}}return n.dropdownCount=0,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(x.oc),e.Y36(A),e.Y36(m.d2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cds-dropdown"],["ibm-dropdown"]],contentQueries:function(t,i,s){if(1&t&&e.Suo(s,B,7),2&t){let o;e.iGM(o=e.CRH())&&(i.view=o.first)}},viewQuery:function(t,i){if(1&t&&(e.Gf(P,7),e.Gf(Y,7)),2&t){let s;e.iGM(s=e.CRH())&&(i.dropdownButton=s.first),e.iGM(s=e.CRH())&&(i.dropdownMenu=s.first)}},hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(o){return i.onKeyDown(o)}),2&t&&e.ekj("cds--dropdown__wrapper",i.hostClass)},inputs:{id:"id",label:"label",helperText:"helperText",placeholder:"placeholder",displayValue:"displayValue",clearText:"clearText",size:"size",type:"type",theme:"theme",disabled:"disabled",skeleton:"skeleton",inline:"inline",disableArrowKeys:"disableArrowKeys",invalid:"invalid",invalidText:"invalidText",warn:"warn",warnText:"warnText",appendInline:"appendInline",scrollableContainer:"scrollableContainer",itemValueKey:"itemValueKey",selectionFeedback:"selectionFeedback",menuButtonLabel:"menuButtonLabel",selectedLabel:"selectedLabel",dropUp:"dropUp"},outputs:{selected:"selected",onClose:"onClose",close:"close"},features:[e._Bn([{provide:E.JU,useExisting:n,multi:!0}])],ngContentSelectors:Te,decls:17,vars:37,consts:[["class","cds--label",3,"for","ngClass",4,"ngIf"],[1,"cds--list-box",3,"ngClass"],["type","button","aria-haspopup","listbox",1,"cds--list-box__field",3,"id","ngClass","click","blur"],["dropdownButton",""],["class","cds--list-box__selection cds--tag--filter cds--list-box__selection--multi","tabindex","0",3,"title","click","keydown.enter",4,"ngIf"],["class","cds--list-box__label",4,"ngIf"],[4,"ngIf"],["class","cds--dropdown__invalid-icon","cdsIcon","warning--filled","size","16",4,"ngIf"],["cdsIcon","warning--alt--filled","size","16","class","cds--list-box__invalid-icon cds--list-box__invalid-icon--warning",4,"ngIf"],[1,"cds--list-box__menu-icon"],["cdsIcon","chevron--down","size","16",3,"ngClass",4,"ngIf"],[3,"ngClass"],["dropdownMenu",""],["class","cds--form__helper-text",3,"ngClass",4,"ngIf"],["class","cds--form-requirement",4,"ngIf"],[1,"cds--label",3,"for","ngClass"],[3,"ngTemplateOutlet"],["tabindex","0",1,"cds--list-box__selection","cds--tag--filter","cds--list-box__selection--multi",3,"title","click","keydown.enter"],["focusable","false","preserveAspectRatio","xMidYMid meet","role","img","xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16","aria-hidden","true",2,"will-change","transform"],["d","M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"],[1,"cds--list-box__label"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["cdsIcon","warning--filled","size","16",1,"cds--dropdown__invalid-icon"],["cdsIcon","warning--alt--filled","size","16",1,"cds--list-box__invalid-icon","cds--list-box__invalid-icon--warning"],["cdsIcon","chevron--down","size","16",3,"ngClass"],[1,"cds--form__helper-text",3,"ngClass"],[1,"cds--form-requirement"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,W,3,6,"label",0),e.TgZ(1,"div",1)(2,"button",2,3),e.NdJ("click",function(o){return i.disabled?o.stopPropagation():i.toggleMenu()})("blur",function(){return i.onBlur()}),e.YNc(4,q,4,2,"div",4),e.YNc(5,X,3,3,"span",5),e.YNc(6,te,1,2,null,6),e.YNc(7,ie,1,0,"svg",7),e.YNc(8,ne,1,0,"svg",8),e.TgZ(9,"span",9),e.YNc(10,oe,1,4,"svg",10),e.qZA()(),e.TgZ(11,"div",11,12),e.YNc(13,le,1,0,"ng-content",6),e.qZA()(),e.YNc(14,he,3,5,"div",13),e.YNc(15,fe,3,2,"div",14),e.YNc(16,ve,3,2,"div",14)),2&t&&(e.Q6J("ngIf",i.label),e.xp6(1),e.Q6J("ngClass",e.rFY(18,be,["multi"!==i.type,"multi"===i.type,"multi"===i.type&&i.getSelectedCount()>0,"light"===i.theme,"light"===i.theme,i.inline,i.skeleton,i.disabled,i.invalid,i.warn,"sm"===i.size,"md"===i.size,"lg"===i.size,!i.menuIsClosed])),e.xp6(1),e.Q6J("id",i.id)("ngClass",e.VKq(33,xe,!i.menuIsClosed)),e.uIk("aria-expanded",!i.menuIsClosed)("aria-disabled",i.disabled)("disabled",!!i.disabled||null),e.xp6(2),e.Q6J("ngIf","multi"===i.type&&i.getSelectedCount()>0),e.xp6(1),e.Q6J("ngIf",i.isRenderString()),e.xp6(1),e.Q6J("ngIf",!i.isRenderString()),e.xp6(1),e.Q6J("ngIf",!i.warn&&i.invalid),e.xp6(1),e.Q6J("ngIf",!i.invalid&&i.warn),e.xp6(2),e.Q6J("ngIf",!i.skeleton),e.xp6(1),e.Q6J("ngClass",e.VKq(35,ye,null!=i.dropUp?i.dropUp:i._dropUp)),e.xp6(2),e.Q6J("ngIf",!i.menuIsClosed),e.xp6(1),e.Q6J("ngIf",i.helperText&&!i.invalid&&!i.warn),e.xp6(1),e.Q6J("ngIf",!i.warn&&i.invalid),e.xp6(1),e.Q6J("ngIf",!i.invalid&&i.warn))},dependencies:[a.mk,a.O5,a.tP,g.ar,a.Ov],encapsulation:2}),n})(),Ne=(()=>{class n{constructor(t,i,s){this.elementRef=t,this.i18n=i,this.appRef=s,this.ariaLabel=this.i18n.get().DROPDOWN_LIST.LABEL,this.listTpl=null,this.select=new e.vpe,this.scroll=new e.vpe,this.blurIntent=new e.vpe,this.type="single",this.showTitles=!0,this.size="md",this.listId="listbox-"+n.listCount++,this.highlightedItem=null,this.displayItems=[],this.index=-1,this._items=[]}set items(t){(0,Z.b)(t)?(this._itemsSubscription&&this._itemsSubscription.unsubscribe(),this._itemsReady=new R.y(i=>{this._itemsSubscription=t.subscribe(s=>{this.updateList(s),i.next(!0),i.complete()})}),this.onItemsReady(null)):this.updateList(t),this._originalItems=t}get items(){return this._originalItems}ngAfterViewInit(){this.index=this.getListItems().findIndex(t=>t.selected),this.setupFocusObservable(),setTimeout(()=>{this.doEmitSelect(!0)})}ngOnDestroy(){this.focusJump&&this.focusJump.unsubscribe(),this._itemsSubscription&&this._itemsSubscription.unsubscribe()}doEmitSelect(t=!0){if("single"===this.type)this.select.emit({item:this._items.find(i=>i.selected),isUpdate:t});else{const i=this.getSelected()||[];i.isUpdate=t,this.select.emit(i)}}getItemId(t){return`${this.listId}-${t}`}updateList(t){this._items=t.map(i=>Object.assign({},i)),this.displayItems=this._items,this.updateIndex(),this.setupFocusObservable(),this.doEmitSelect()}filterBy(t=""){t?(this.displayItems=this.getListItems().filter(i=>i.content.toLowerCase().includes(t.toLowerCase())),this.displayItems&&(this.index=0)):this.displayItems=this.getListItems(),this.updateIndex()}setupFocusObservable(){if(!this.list)return;this.focusJump&&this.focusJump.unsubscribe();let t=Array.from(this.list.nativeElement.querySelectorAll("li"));this.focusJump=function Ue(n,l){return(0,Q.R)(n,"keydown").pipe(T(150),(0,I.U)(t=>{let i=l.find(s=>s.textContent.trim().toLowerCase().startsWith(t.key));if(i)return i}),(0,_.h)(t=>!!t))}(this.list.nativeElement,t).subscribe(i=>{i.focus()})}getNextItem(){return this.index<this.displayItems.length-1&&this.index++,this.displayItems[this.index]}hasNextElement(){return this.index<this.displayItems.length-1&&(this.index!==this.displayItems.length-2||!this.displayItems[this.index+1].disabled)}getNextElement(){const t=this.listElementList?this.listElementList.toArray():[];if(!t.length)return null;for(let i=this.index+1;i<t.length;i++)if(!this.displayItems[i].disabled)return this.index=i,t[i].nativeElement;return t[this.index].nativeElement}getPrevItem(){return this.index>0&&this.index--,this.displayItems[this.index]}hasPrevElement(){return this.index>0&&(1!==this.index||!this.displayItems[0].disabled)}getPrevElement(){const t=this.listElementList?this.listElementList.toArray():[];if(!t.length)return null;for(let i=this.index-1;i<this.index&&i>=0;i--)if(!this.displayItems[i].disabled)return this.index=i,t[i].nativeElement;return t[this.index].nativeElement}getCurrentItem(){return this.index<0?this.displayItems[0]:this.displayItems[this.index]}getCurrentElement(){return this.index<0?this.listElementList.first.nativeElement:this.listElementList.toArray()[this.index].nativeElement}getListItems(){return this._items}getSelected(){let t=this.getListItems().filter(i=>i.selected);return 0===t.length?[]:t}propagateSelected(t){Array.isArray(t)||console.error(`${this.constructor.name}.propagateSelected expects an Array<ListItem>, got ${JSON.stringify(t)}`),this.onItemsReady(()=>{for(let i of this.getListItems()){let s=Object.assign({},i);delete s.selected,s=JSON.stringify(s);for(let o of t){let c=Object.assign({},o);if(delete c.selected,c=JSON.stringify(c),s.includes(c)){i.selected=o.selected;break}i.selected=!1}}})}initFocus(){this.index<0&&this.updateIndex(),this.list.nativeElement.focus(),setTimeout(()=>{this.highlightedItem=this.getItemId(this.index)})}updateIndex(){const t=this.getSelected();t.length?this.index=this.displayItems.indexOf(t[0]):this.hasNextElement()&&this.getNextElement()}navigateList(t){"Enter"===t.key||" "===t.key?(this.listElementList.some(i=>i.nativeElement===t.target)&&t.preventDefault(),"Enter"===t.key&&this.doClick(t,this.getCurrentItem())):("ArrowDown"===t.key||"ArrowUp"===t.key)&&(t.preventDefault(),"ArrowDown"===t.key?this.hasNextElement()?this.getNextElement().scrollIntoView({block:"end"}):this.blurIntent.emit("bottom"):"ArrowUp"===t.key&&(this.hasPrevElement()?this.getPrevElement().scrollIntoView():this.blurIntent.emit("top")),setTimeout(()=>{this.highlightedItem=this.getItemId(this.index)}))}doClick(t,i){if(t.preventDefault(),i&&!i.disabled){if(this.list.nativeElement.focus(),"single"===this.type){i.selected=!0;for(let s of this.getListItems())i!==s&&(s.selected=!1)}else i.selected=!i.selected;this.index=this.displayItems.indexOf(i),this.highlightedItem=this.getItemId(this.index),this.doEmitSelect(!1),this.appRef.tick()}}onItemFocus(t){const i=this.listElementList.toArray()[t].nativeElement;i.classList.add("cds--list-box__menu-item--highlighted"),i.tabIndex=0}onItemBlur(t){const i=this.listElementList.toArray()[t].nativeElement;i.classList.remove("cds--list-box__menu-item--highlighted"),i.tabIndex=-1}emitScroll(t){this.scroll.emit({atTop:0===t.srcElement.scrollTop,atBottom:t.srcElement.scrollHeight-t.srcElement.scrollTop===t.srcElement.clientHeight,event:t})}onItemsReady(t){(this._itemsReady||(0,f.of)(!0)).pipe((0,K.P)()).subscribe(t)}reorderSelected(t=!0){this.displayItems=[...this.getSelected(),...this.getListItems().filter(i=>!i.selected)],t&&setTimeout(()=>{this.updateIndex(),this.highlightedItem=this.getItemId(this.index)})}}return n.listCount=0,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(x.oc),e.Y36(e.z2F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cds-dropdown-list"],["ibm-dropdown-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ie,7),e.Gf(Ce,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.list=s.first),e.iGM(s=e.CRH())&&(i.listElementList=s)}},inputs:{ariaLabel:"ariaLabel",items:"items",listTpl:"listTpl",type:"type",showTitles:"showTitles"},outputs:{select:"select",scroll:"scroll",blurIntent:"blurIntent"},features:[e._Bn([{provide:B,useExisting:n}])],decls:3,vars:4,consts:[["role","listbox","tabindex","-1",1,"cds--list-box__menu","cds--multi-select",3,"id","scroll","keydown"],["list",""],["role","option","class","cds--list-box__menu-item",3,"id","ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"cds--list-box__menu-item",3,"id","ngClass","click"],["tabindex","-1",1,"cds--list-box__menu-item__option"],["listItem",""],["class","cds--form-item cds--checkbox-wrapper",4,"ngIf"],[4,"ngIf"],["cdsIcon","checkmark","size","16","class","cds--list-box__menu-item__selected-icon",4,"ngIf"],[1,"cds--form-item","cds--checkbox-wrapper"],[1,"cds--checkbox-label"],["type","checkbox","tabindex","-1",1,"cds--checkbox",3,"checked","disabled"],[1,"cds--checkbox-appearance"],[1,"cds--checkbox-label-text"],["cdsIcon","checkmark","size","16",1,"cds--list-box__menu-item__selected-icon"],[3,"ngTemplateOutletContext","ngTemplateOutlet"]],template:function(t,i){1&t&&(e.TgZ(0,"ul",0,1),e.NdJ("scroll",function(o){return i.emitScroll(o)})("keydown",function(o){return i.navigateList(o)}),e.YNc(2,Oe,7,12,"li",2),e.qZA()),2&t&&(e.Q6J("id",i.listId),e.uIk("aria-label",i.ariaLabel)("aria-activedescendant",i.highlightedItem),e.xp6(2),e.Q6J("ngForOf",i.displayItems))},dependencies:[a.mk,a.sg,a.O5,a.tP,g.ar],encapsulation:2}),n})(),Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[A],imports:[a.ez,E.u5,x.LU,M.Qq,m.As,g.QX]}),n})();var v=r(6811),U=r(8645),Qe=r(2572),N=r(3997),J=r(9397),Ze=r(9647),Re=r(7754);let He=(()=>{var n;class l{transform(i,s,o){return i.map(c=>({columnId:c.id,content:c[s],selected:o===c.id}))}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275pipe=e.Yjl({name:"columnsToListItem",type:n,pure:!0,standalone:!0}),l})();function Ve(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"cds-modal",1),e.NdJ("overlaySelected",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeModal())}),e.TgZ(2,"cds-icon-button",2),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isConfirmDeleteTaskOpen.set(!0))}),e.O4$(),e._UZ(3,"svg",3),e.qZA(),e.kcU(),e.TgZ(4,"cds-modal-header",4)(5,"h1",5),e._uU(6,"Task editor"),e.qZA()(),e.TgZ(7,"section",6)(8,"cds-label"),e._uU(9," Task name "),e.TgZ(10,"input",7),e.NdJ("input",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changeTaskTitle(s))}),e.qZA()(),e.TgZ(11,"cds-dropdown",8),e.NdJ("selected",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changeTaskColumn(s))}),e._UZ(12,"cds-dropdown-list",9),e.ALo(13,"columnsToListItem"),e.qZA(),e.TgZ(14,"cds-label",10),e._uU(15," Description "),e.TgZ(16,"textarea",11),e.NdJ("input",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changeTaskDescription(s))}),e.qZA()()(),e.TgZ(17,"cds-modal-footer"),e.ynx(18),e.TgZ(19,"button",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeModal())}),e._uU(20,"Done"),e.qZA(),e.BQk(),e.qZA()(),e.TgZ(21,"cds-modal",1),e.NdJ("overlaySelected",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isConfirmDeleteTaskOpen.set(!1))}),e.TgZ(22,"cds-modal-header",13),e.NdJ("closeSelect",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isConfirmDeleteTaskOpen.set(!1))}),e.TgZ(23,"h2",5),e._uU(24,"Confirmation"),e.qZA()(),e.TgZ(25,"section",14)(26,"h3"),e._uU(27,"Are you sure you want to delete this task?"),e.qZA(),e.TgZ(28,"p",15),e._uU(29,"This action is irreversible"),e.qZA()(),e.TgZ(30,"cds-modal-footer"),e.ynx(31),e.TgZ(32,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isConfirmDeleteTaskOpen.set(!1))}),e._uU(33," Cancel "),e.qZA(),e.TgZ(34,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onConfirmDeleteTask())}),e._uU(35," Confirm "),e.qZA(),e.BQk(),e.qZA()(),e.BQk()}if(2&n){const t=l.ngIf,i=e.oxw();e.xp6(1),e.Q6J("open",!0),e.xp6(3),e.Q6J("showCloseButton",!1),e.xp6(6),e.Q6J("value",t.task.title),e.xp6(2),e.Q6J("items",e.Dn7(13,8,t.columns,"title",t.task.boardColumn)),e.xp6(4),e.Q6J("value",t.task.description),e.xp6(5),e.Q6J("open",i.isConfirmDeleteTaskOpen()),e.xp6(1),e.Q6J("showCloseButton",!0),e.xp6(10),e.uIk("modal-primary-focus",!0)}}let Fe=(()=>{var n;class l{constructor(){this._router=(0,e.f3M)(S.F0),this._activatedRoute=(0,e.f3M)(S.gz),this._taskService=(0,e.f3M)(Re.M),this._columnService=(0,e.f3M)(Ze.w),this._taskTitleInputSubject=new U.x,this._taskDescInputSubject=new U.x,this.items=[{content:"Hi",selected:!0}],this.isConfirmDeleteTaskOpen=(0,e.tdS)(!1);const i=this._activatedRoute.snapshot.paramMap.get("id");if(!i)throw new Error("Missing task id in url");this.currentTaskId=i;const s=this._activatedRoute.parent?.snapshot.paramMap.get("id");if(!s)throw new Error("Missing board id in url");this.currentBoardId=s,this.data$=(0,Qe.a)([this._taskService.currentTasks$.pipe((0,_.h)(o=>!!o),(0,I.U)(o=>{const c=o.find(d=>d.id===this.currentTaskId);if(!c)throw new Error("could not find task with this id: "+this.currentTaskId);return c})),this._columnService.currentColumns$.pipe((0,_.h)(o=>!!o))]).pipe((0,I.U)(([o,c])=>({task:o,columns:c}))),this._taskTitleInputSubject.pipe((0,k.sL)(),T(500),(0,_.h)(o=>!!o),(0,N.x)(),(0,J.b)(o=>this._taskService.updateTask({taskId:this.currentTaskId,boardId:this.currentBoardId,newTitle:o}))).subscribe(),this._taskDescInputSubject.pipe((0,k.sL)(),T(500),(0,_.h)(o=>!!o),(0,N.x)(),(0,J.b)(o=>this._taskService.updateTask({taskId:this.currentTaskId,boardId:this.currentBoardId,newDescription:o}))).subscribe()}changeTaskColumn(i){const{item:s}=i;this._taskService.updateTask({taskId:this.currentTaskId,boardId:this.currentBoardId,newColumn:s.columnId})}changeTaskTitle(i){this._taskTitleInputSubject.next(i.target.value)}changeTaskDescription(i){this._taskDescInputSubject.next(i.target.value)}onConfirmDeleteTask(){this._taskService.deleteTask({taskId:this.currentTaskId,boardId:this.currentBoardId}),this.closeModal()}closeModal(){const i=this._activatedRoute.snapshot.parent?.paramMap.get("id");this._router.navigateByUrl(i?D.Dc.board({id:i}):D.Dc.mainBoard)}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["v-notes-lib-task"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"open","overlaySelected"],["kind","danger--tertiary","type","button",1,"delete-btn",3,"click"],["cdsIcon","trash-can","size","16",1,"cds--btn__icon"],[3,"showCloseButton"],["cdsModalHeaderHeading",""],["cdsModalContent","",1,"modal-content"],["cdsText","","autocomplete","off",3,"value","input"],["label","Column",3,"selected"],[3,"items"],[1,"modal-content__description-container"],["cdsTextArea","","aria-label","textarea","placeholder","Give this task a more detailed description...","rows","10",3,"value","input"],["cdsButton","primary",3,"click"],[3,"showCloseButton","closeSelect"],["cdsModalContent",""],["cdsModalContentText",""],["cdsButton","secondary",3,"click"],["cdsButton","danger--primary",3,"click"]],template:function(i,s){1&i&&(e.YNc(0,Ve,36,12,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,s.data$))},dependencies:[a.ez,a.O5,a.Ov,u.zk,u.u_,u.xB,u.mz,u.hz,u.Ay,u.GE,b.hJ,b.zx,b.hU,Je,Ae,Ne,g.QX,g.ar,v.gP,v.__,v.oi,v.Kx,He],styles:["[_nghost-%COMP%]   .delete-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem}[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;align-items:end;gap:1rem}[_nghost-%COMP%]   .modal-content__description-container[_ngcontent-%COMP%]{grid-column:span 2}[_nghost-%COMP%]   .modal-content__description-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),l})()}}]);